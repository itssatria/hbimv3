(this["webpackJsonpviewer-server"]=this["webpackJsonpviewer-server"]||[]).push([[0],{31:function(e,t,n){e.exports=n(70)},36:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},68:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"GET_AGGREGATE_PROPERTIES",(function(){return f}));var o={};n.r(o),n.d(o,"getViewerProperties",(function(){return E}));var i=n(0),r=n.n(i),s=n(9),l=n.n(s),c=n(2),u=n(3),m=n(5),p=n(4),d=n(6),v=(n(36),n(8)),h=n(14),f="GET_AGGREGATE_PROPERTIES";function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:f,properties:e}}var b=n(30),g={properties:[]};var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.GET_AGGREGATE_PROPERTIES:var n=t.properties;return Object(v.a)(Object(v.a)({},e),{},{properties:n});default:return e}},k=Object(b.a)(y),x=k,O=n(28),j=n.n(O);var w,C,N,V={accessToken:{getaccesstoken:function(){return j.a.get("/token").then((function(e){return e.data})).catch((function(e){console.log(e)}))}}.getaccesstoken()},A=0,S=null,P=!1,M=!0,T=null,R=!1;function L(e){Autodesk.Viewing.Document.load(e,(function(e){var t=Autodesk.Viewing.Document.getSubItemsWithProperties(e.getRootItem(),{type:"geometry"},!0);t.length>0&&(t.forEach((function(e,t){})),w.addEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT,D),w.addEventListener(Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,Object(h.debounce)((function(){console.log("selection change"),new Promise((function(e,t){var n=w.getSelection()[0];return 1!==w.getSelectionCount()?t("Invalid selection count"):new Promise((function(e){w.model.getProperties(n,(function(t){var n=t.properties.filter((function(e){return!e.hidden}));e(n)}))})).then((function(t){t=t.map((function(e){return Object(v.a)(Object(v.a)({},e),{},{displayCategory:e.displayCategory||"Miscellaneous"})}));var n=Object(h.uniq)(t.map((function(e){return e.displayCategory}))).map((function(e){return{category:e,data:t.filter((function(t){return t.displayCategory===e}))}}));e(n)}))})).then((function(e){return k.dispatch(o.getViewerProperties(e))})).catch((function(){return k.dispatch(o.getViewerProperties([]))}))})),200),w.load(e.getViewablePath(t[0])))}),(function(e){console.log(e)}))}function D(e){var t=e.target;t.removeEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT,D),t.fitToView(),t.setQualityLevel(!1,!1)}function G(){w.resize()}function F(e){e||P?(cancelAnimationFrame(C),P=!1,e&&(A=0,w.explode(A))):(W(),P=!0)}function W(e){S||(S=e);var t=e-S;S=e;var n=2e-4*(t||0);M?A+=n:A-=n,A>1?(M=!1,A=1):A<0&&(M=!0,A=0),w.explode(A),C=window.requestAnimationFrame(W)}function I(e){T||(T=e);var t=e-T;T=e;var n=5e-4*(t||0),a=w.navigation.getWorldUpVector(),o=w.navigation.getPosition(),i=new THREE.Vector3(o.x,o.y,o.z),r=new THREE.Vector3(a.x,a.y,a.z),s=(new THREE.Matrix4).makeRotationAxis(r,n);i.applyMatrix4(s),w.navigation.setPosition(i),N=window.requestAnimationFrame(I)}function Y(e){e||R?(cancelAnimationFrame(N),R=!1):(I(),R=!0)}var _={launchViewer:function(e,t,n){n,V.accessToken.then((function(n){var a={document:t,env:"AutodeskProduction",accessToken:n.access_token},o=document.getElementById(e);w=new Autodesk.Viewing.Viewer3D(o,{}),Autodesk.Viewing.Initializer(a,(function(){w.initialize(),w.prefs.tag("ignore-producer"),L(a.document)}))}))},loadDocument:L},J=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){_.launchViewer("viewerDiv","urn:dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6ZGlzYnVkLWhiaW0tYnVja2V0L0ZhdGFoaWxsYWgucnZ0","0001")}},{key:"render",value:function(){return r.a.createElement("div",{className:"forge-viewer",id:"viewerDiv"})}}]),n}(i.Component),z=n(7),Z=n.n(z),Q=n(10),q=n.n(Q),B=n(11),H=(n(64),function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={collapsed:new Map},a}return Object(u.a)(n,[{key:"toggleProperty",value:function(e,t){t.preventDefault();var n=this.state.collapsed.get(e);this.setPropertyByIndex(e,!n)}},{key:"setPropertyByIndex",value:function(e,t){var n=this.state.collapsed;n.set(e,!0),this.setState({collapsed:n})}},{key:"componentDidMount",value:function(){1===this.props.properties.length&&this.setPropertyByIndex(0,!0)}},{key:"componentDidUpdate",value:function(e){var t=this.props.properties;e.properties!==t&&1===t.length&&this.setPropertyByIndex(0,!0)}},{key:"render",value:function(){var e=this,t=this.state.collapsed;return r.a.createElement("div",{className:"model-properties"},r.a.createElement("div",null,r.a.createElement("button",{className:"close-btn",onClick:this.props.onClose},r.a.createElement("i",{className:"fa fa-close"})),r.a.createElement("h3",null,"Properties"),this.props.properties.length?null:r.a.createElement("p",null,r.a.createElement("em",null,"Select a part to get started")),r.a.createElement("div",null,r.a.createElement("div",null,this.props.properties.map((function(n,a){return r.a.createElement("ul",{key:a},r.a.createElement("div",null,r.a.createElement("h4",null,r.a.createElement("a",{"data-toggle":"collapse",onClick:e.toggleProperty.bind(e,a)},n.category))),t.get(a)?r.a.createElement("div",null,r.a.createElement("ul",null,n.data.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("strong",null,e.displayName,":")," ",e.displayValue)})))):null)}))))))}}]),n}(i.Component)),U=Object(B.b)((function(e){return{properties:e.properties}}))(H),X=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).handlePropertiesClose=function(){e.setState({properties:!1})},e.state={fullscreen:!1,explode:!1,expMotion:!1,rotMotion:!1,resetState:!1,properties:!0,value:0},e.onFullscreen=e.onFullscreen.bind(Object(d.a)(e)),e.onExplode=e.onExplode.bind(Object(d.a)(e)),e.onExplodeAnimation=e.onExplodeAnimation.bind(Object(d.a)(e)),e.onRotateAnimation=e.onRotateAnimation.bind(Object(d.a)(e)),e.onResetState=e.onResetState.bind(Object(d.a)(e)),e.onOrientationChange=e.onOrientationChange.bind(Object(d.a)(e)),e.onPropertiesDisplay=e.onPropertiesDisplay.bind(Object(d.a)(e)),e.handleValueChange=e.handleValueChange.bind(Object(d.a)(e)),e.onSelectionChange=e.onSelectionChange.bind(Object(d.a)(e)),e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("orientationchange",this.onOrientationChange)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("orientationchange",this.onOrientationChange)}},{key:"handleValueChange",value:function(e){var t;this.setState({value:e.target.value}),t=this.state.value/100,w.explode(t)}},{key:"onFullscreen",value:function(){var e=this;this.setState({fullscreen:!this.state.fullscreen},(function(){e.state.fullscreen?(q()(0,0,{ease:"inQuad",duration:300}),document.body.classList.add("fullscreen")):(document.body.classList.remove("fullscreen"),e.onResetState(),e.state.explode&&document.body.classList.remove("explode"),e.setState({fullscreen:!1,explode:!1,expMotion:!1,rotMotion:!1,resetState:!1,properties:!0,value:0})),setTimeout((function(){return G()}),300)}))}},{key:"onPropertiesDisplay",value:function(){var e=this;this.setState({properties:!this.state.properties},(function(){e.state.properties?document.body.classList.add("properties-show"):document.body.classList.remove("properties-show")}))}},{key:"onExplode",value:function(){var e=this;this.setState({explode:!this.state.explode},(function(){e.state.explode?document.body.classList.add("explode"):document.body.classList.remove("explode")}))}},{key:"onOrientationChange",value:function(){setTimeout((function(){return G()}),300)}},{key:"onExplodeAnimation",value:function(){var e=this;this.setState({expMotion:!this.state.expMotion},(function(){e.state.expMotion?(document.body.classList.add("explode-motion"),F()):(document.body.classList.remove("explode-motion"),F())}))}},{key:"onRotateAnimation",value:function(){var e=this;this.setState({rotMotion:!this.state.rotMotion},(function(){e.state.rotMotion?(document.body.classList.add("rotate-motion"),Y()):(document.body.classList.remove("rotate-motion"),Y())}))}},{key:"onResetState",value:function(){document.body.classList.remove("explode","explode-motion","rotate-motion"),this.setState({explode:!1,expMotion:!1,rotMotion:!1}),F(!0),Y(!0)}},{key:"onSelectionChange",value:function(){this.state.properties}},{key:"render",value:function(){var e=Z()({fa:!0,"fa-expand":!this.state.fullscreen,"fa-compress":this.state.fullscreen}),t=Z()({fa:!0,"fa-list":this.state.fullscreen}),n=Z()({fa:!0,"fa-cubes":this.state.fullscreen}),a=Z()({fa:!0,"fa-bomb":this.state.fullscreen}),o=Z()({fa:!0,"fa-repeat":this.state.fullscreen}),i=Z()({fa:!0,"fa-refresh":this.state.fullscreen}),s=Z()({"properties-btn":!0,"btn--active":this.state.properties,"btn--deactive":!this.state.properties}),l=Z()({"explode-btn":!0,"btn--active":this.state.explode,"btn--deactive":!this.state.explode}),c=Z()({"explode-motion-btn":!0,"expbtn--active":this.state.expMotion,"expbtn--deactive":!this.state.expMotion}),u=Z()({"rotate-motion-btn":!0,"rotbtn--active":this.state.rotMotion,"rotbtn--deactive":!this.state.rotMotion}),m=Z()({"reset-btn":!0,"resetbtn--deactive":!this.state.rotMotion});return r.a.createElement("div",{className:"forge-jumbotron"},r.a.createElement(J,null),r.a.createElement("div",{className:"forge-logo"},r.a.createElement("img",{src:"images/forge-logo.png",alt:"Autodesk Forge"})),r.a.createElement("div",{className:"container safari-only"},r.a.createElement("button",{className:"forge-btn",onClick:this.onFullscreen},r.a.createElement("i",{className:e})),r.a.createElement("button",{className:s,onClick:this.onPropertiesDisplay},r.a.createElement("i",{className:t})),r.a.createElement("button",{className:l,onClick:this.onExplode},r.a.createElement("i",{className:n})),r.a.createElement("button",{className:c,onClick:this.onExplodeAnimation},r.a.createElement("i",{className:a})),r.a.createElement("button",{className:u,onClick:this.onRotateAnimation},r.a.createElement("i",{className:o})),r.a.createElement("button",{className:m,onClick:this.onResetState},r.a.createElement("i",{className:i})),this.state.properties?r.a.createElement(U,{onClose:this.handlePropertiesClose}):null,r.a.createElement("input",{type:"range",className:"range-style",min:"0",max:"100",value:this.state.value,onChange:this.handleValueChange})))}}]),n}(i.Component),K=(n(65),function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"forge-footer"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-6"}),r.a.createElement("div",{className:"col-xs-6 footer-copyright"},"\xa9 2022 Copyright Dinas Kebudayaan Provinsi DKI Jakarta. All rights reserved."))))}}]),n}(i.Component)),$=(n(66),[{img:"images/museum-sejarah-jkt.png",title:"Museum Sejarah Jakarta",key:"0001",urn:"urn:dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6ZGlzYnVkLWhiaW0tYnVja2V0L0ZhdGFoaWxsYWgucnZ0"},{img:"images/museum-tekstil.png",title:"Museum Textil",key:"0002",urn:"urn:dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6ZGlzYnVkLWhiaW0tYnVja2V0L01lc2V1bSUyMFRleHRpbCUyMFRhbmFoJTIwQWJhbmcucnZ0"}]),ee=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"onTileSelect",value:function(e,t){t.preventDefault(),q()(0,0,{ease:"inQuad",duration:300}),setTimeout((function(){return _.launchViewer("viewerDiv",e.urn,e.key)}),300)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"forge-gallery"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},$.map((function(t,n){return r.a.createElement("div",{className:"col-md-4 col-xs-6 tile",key:n},r.a.createElement("a",{href:"#",onClick:e.onTileSelect.bind(e,t)},r.a.createElement("img",{className:"tile-avatar",src:t.img,alt:t.title})),r.a.createElement("div",{className:"tile-title"},t.title))})))))}}]),n}(i.Component),te=(n(67),n(68),n(69),function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(X,null),r.a.createElement(ee,null),r.a.createElement(K,null))}}]),n}(i.Component));l.a.render(r.a.createElement(B.a,{store:x},r.a.createElement(te,null)),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.37fcb1ed.chunk.js.map